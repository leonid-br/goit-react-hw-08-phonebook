(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{17:function(e,t,n){e.exports={form:"RegisterForm_form__2XBFc",segment:"RegisterForm_segment__3z0tI",input:"RegisterForm_input__2O1H5",label:"RegisterForm_label__250Xk",red:"RegisterForm_red__3iRnT",link:"RegisterForm_link__2e2je"}},20:function(e,t,n){e.exports={form:"LoginForm_form__2Y2ZZ",segment:"LoginForm_segment__3QaMi",input:"LoginForm_input__2lE6j",label:"LoginForm_label__2C4Gh",red:"LoginForm_red__2uP4g",link:"LoginForm_link__2bpeS"}},22:function(e,t,n){e.exports={form:"ContactForm_form__RP-9Z",lable:"ContactForm_lable__UIVMW",input:"ContactForm_input__3F67c",button:"ContactForm_button__1h-0h"}},23:function(e,t,n){e.exports={heading:"WelcomePage_heading__3gjgX",p:"WelcomePage_p__32FHj",a:"WelcomePage_a__AkFqo"}},28:function(e,t,n){e.exports={title:"Heading_title__TLsTR",heading:"Heading_heading__2-VDX",btn:"Heading_btn__3HnOf"}},35:function(e,t,n){e.exports={item:"ContactItem_item__2i-yG",button:"ContactItem_button__3wrKc",number:"ContactItem_number__qJWd6"}},39:function(e,t,n){e.exports={label:"Filter_label__2v-sz",input:"Filter_input__XrOPC"}},40:function(e,t,n){e.exports={list:"ContactList_list__RMVxy",heading:"ContactList_heading__27XP2"}},52:function(e,t,n){e.exports={container:"Container_container__1pfDO"}},53:function(e,t,n){e.exports={notification:"Notification_notification__vvL0T"}},61:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var a,c,r,o=n(1),s=n(31),i=n.n(s),u=n(18),l=n(49),b=n(4),j=(n(61),n(27)),d=n(6),p=n(19),h=n(2),m=n(8),O=Object(d.b)("phonebook/getContactsRequest"),f=Object(d.b)("phonebook/getContactsSuccess"),g=Object(d.b)("phonebook/getContactsError"),x=Object(d.b)("phonebook/addContactRequest"),_=Object(d.b)("phonebook/addContactSuccess"),v=Object(d.b)("phonebook/addContactError"),k=Object(d.b)("phonebook/deleteContactRequest"),y=Object(d.b)("phonebook/deleteContactSuccess"),N=Object(d.b)("phonebook/deleteContactError"),C=Object(d.b)("phonebook/filter"),w=Object(d.d)([],(a={},Object(h.a)(a,f,(function(e,t){return t.payload})),Object(h.a)(a,_,(function(e,t){var n=t.payload;return[].concat(Object(j.a)(e),[n])})),Object(h.a)(a,y,(function(e,t){var n=t.payload;return Object(j.a)(e.filter((function(e){return e.id!==n})))})),a)),F=Object(d.d)("",Object(h.a)({},C,(function(e,t){return t.payload}))),L=Object(d.d)(!1,(c={},Object(h.a)(c,O,(function(){return!0})),Object(h.a)(c,f,(function(){return!1})),Object(h.a)(c,g,(function(){return!1})),Object(h.a)(c,x,(function(){return!0})),Object(h.a)(c,_,(function(){return!1})),Object(h.a)(c,v,(function(){return!1})),Object(h.a)(c,k,(function(){return!0})),Object(h.a)(c,y,(function(){return!1})),Object(h.a)(c,N,(function(){return!1})),c)),I=Object(d.d)("",(r={},Object(h.a)(r,g,(function(){return"Something went wrong, try again later"})),Object(h.a)(r,O,(function(){return""})),Object(h.a)(r,v,(function(){return"Something went wrong, try again later"})),Object(h.a)(r,x,(function(){return""})),Object(h.a)(r,N,(function(){return"Something went wrong, try again later"})),Object(h.a)(r,k,(function(){return""})),r)),R=Object(m.b)({items:w,filter:F,isLoading:L,onError:I}),S=n(50),q=n.n(S),A=n(16),P=n.n(A),E=n(21),z=n(14),W=n.n(z),U=n(3);W.a.defaults.baseURL="https://connections-api.herokuapp.com";var D,H=function(e){W.a.defaults.headers.common.Authorization="Bearer ".concat(e)},T=function(e){W.a.defaults.headers.common.Authorization=""},V=Object(d.c)("phonebook/signUp",function(){var e=Object(E.a)(P.a.mark((function e(t,n){var a,c,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,W.a.post("/users/signup",t);case 4:return c=e.sent,r=c.data,H(r.token),e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",a(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),X=Object(d.c)("phonebook/login",function(){var e=Object(E.a)(P.a.mark((function e(t){var n,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.a.post("/users/login",t);case 3:return n=e.sent,a=n.data,H(a.token),e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0),Object(U.g)().push("/"),console.log(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),Z=Object(d.c)("phonebook/logout",Object(E.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.a.post("/users/logout");case 3:T(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))),B=Object(d.c)("phonebook/auth-refresh",function(){var e=Object(E.a)(P.a.mark((function e(t,n){var a,c,r,o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.getState(),null!==(c=a.auth.token)){e.next=5;break}return console.log("\u0422\u043e\u043a\u0435\u043d\u0430 \u043d\u0435\u0442, \u0443\u0445\u043e\u0434\u0438\u043c \u0438\u0437 fetchCurrentUser"),e.abrupt("return",n.rejectWithValue());case 5:return H(c),e.prev=6,e.next=9,W.a.get("/users/current");case 9:return r=e.sent,o=r.data,e.abrupt("return",o);case 14:return e.prev=14,e.t0=e.catch(6),e.abrupt("return",n.rejectWithValue(e.t0.message));case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t,n){return e.apply(this,arguments)}}()),J=Object(d.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,error:null},extraReducers:(D={},Object(h.a)(D,V.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(h.a)(D,V.rejected,(function(e,t){e.error=t.payload})),Object(h.a)(D,V.pending,(function(e,t){e.error=""})),Object(h.a)(D,X.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(h.a)(D,X.rejected,(function(e,t){e.user={user:null,email:null},e.token=null,e.isLoggedIn=!1,alert("Wrong username or password. Please try again"),console.log("error!")})),Object(h.a)(D,Z.fulfilled,(function(e,t){e.user={user:null,email:null},e.token=null,e.isLoggedIn=!1})),Object(h.a)(D,B.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0})),D)}).reducer,M=Object(j.a)(Object(d.f)({serializableCheck:{ignoredActions:[p.a,p.f,p.b,p.c,p.d,p.e]}})),G={key:"auth",storage:q.a,whitelist:["token"]},Y=Object(d.a)({reducer:{auth:Object(p.g)(G,J),contacts:R},middleware:M,devTools:!1}),K=Object(p.h)(Y),Q=n(7),$=n(24);W.a.defaults.baseURL="https://connections-api.herokuapp.com";var ee=function(){return function(){var e=Object(E.a)(P.a.mark((function e(t){var n,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(O()),e.prev=1,e.next=4,W.a.get("/contacts");case 4:n=e.sent,a=n.data,t(f(a)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(g(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},te=n(22),ne=n.n(te),ae=function(e){return e.contacts.items},ce=function(e){return e.contacts},re=function(e){return e.auth.isLoggedIn},oe=function(e){return e.auth.user.name},se=n(0),ie=function(){var e=Object(o.useState)({name:"",number:""}),t=Object($.a)(e,2),n=t[0],a=t[1],c=Object(b.b)(),r=Object(b.c)(ae),s=function(e){var t=e.target,n=t.name,c=t.value;a((function(e){return Object(Q.a)(Object(Q.a)({},e),{},Object(h.a)({},n,c))}))};return Object(se.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),function(e){var t=e.toLowerCase();return r.find((function(e){var n=e.name;return t===n.toLowerCase()}))}(n.name))return alert('This contact "'.concat(n.name.toUpperCase(),'" has already been added to your Phonebook'));var t;c((t=n,function(e){e(x()),W.a.post("/contacts",t).then((function(t){var n=t.data;return e(_(n))})).catch((function(t){return e(v(t.message))}))})),a({name:"",number:""})},className:ne.a.form,children:[Object(se.jsxs)("label",{className:ne.a.lable,children:["Name",Object(se.jsx)("input",{type:"text",name:"name",value:n.name,onChange:s,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",required:!0,className:ne.a.input,placeholder:"Ivan Ivanov"})]}),Object(se.jsxs)("label",{className:ne.a.lable,children:["Number",Object(se.jsx)("input",{type:"tel",name:"number",value:n.number,onChange:s,pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0446\u0438\u0444\u0440 \u0438 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b, \u0442\u0438\u0440\u0435, \u043a\u0440\u0443\u0433\u043b\u044b\u0435 \u0441\u043a\u043e\u0431\u043a\u0438 \u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 +",required:!0,className:ne.a.input,placeholder:"+7-999-99-99"})]}),Object(se.jsx)("button",{type:"submit",className:ne.a.button,children:"Add contact"})]})},ue=n(39),le=n.n(ue),be=function(){var e=Object(b.c)((function(e){return e.contacts.filter})),t=Object(b.b)();return Object(se.jsxs)("label",{className:le.a.label,children:["Find contacts by name",Object(se.jsx)("input",{placeholder:"Search contact",type:"text",value:e,onChange:function(e){return t(C(e.target.value))},className:le.a.input})]})},je=n(15),de=n.n(je),pe=n(35),he=n.n(pe),me=function(e){var t=e.id,n=e.name,a=e.number,c=Object(b.b)();return Object(se.jsxs)("li",{className:he.a.item,children:[Object(se.jsx)("span",{children:n}),":",Object(se.jsx)("span",{className:he.a.number,children:a}),Object(se.jsx)("button",{type:"button",onClick:function(){return c(function(e){return function(t){t(k()),W.a.delete("/contacts/".concat(e)).then((function(){return t(y(e))})).catch((function(e){return t(N(e.message))}))}}(t))},className:he.a.button,children:"Delete"})]},t)},Oe=n(40),fe=n.n(Oe);me.porpTypes={contacts:de.a.arrayOf(de.a.object),id:de.a.string,name:de.a.string,number:de.a.string};var ge=function(){var e=Object(b.b)(),t=Object(b.c)(ce),n=t.items,a=t.filter,c=Object(b.c)(re),r=function(e,t){var n=t.toLowerCase(),a=e.filter((function(e){return e.name.toLowerCase().includes(n)}));return 0===a.length&&alert("No contact ".concat(n.toUpperCase())),a}(n,a);return Object(o.useEffect)((function(){c&&e(ee())}),[e,c]),Object(se.jsx)(se.Fragment,{children:c&&n.length>0&&Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)("h2",{className:fe.a.heading,children:"Contacts"}),Object(se.jsx)("ul",{className:fe.a.list,children:r.map((function(e){return Object(se.jsx)(me,{name:e.name,number:e.number,id:e.id},e.id)}))})]})})},xe=n(52),_e=n.n(xe),ve=function(e){var t=e.children;return Object(se.jsx)("div",{className:_e.a.container,children:t})},ke=n(28),ye=n.n(ke),Ne=function(e){var t=e.title,n=Object(b.b)();return Object(se.jsxs)("div",{className:ye.a.heading,children:[Object(se.jsx)("h2",{className:ye.a.title,children:t}),Object(se.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault();try{n(Z())}catch(t){}},className:ye.a.btn,children:Object(se.jsx)(u.b,{to:"/",className:ye.a.btn,children:"Log out"})})]})},Ce=n(53),we=function(){return Object(se.jsx)("p",{className:Ce.notification,children:"Enter your first contact"})},Fe=n(23),Le=n.n(Fe),Ie=function(){return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)("h2",{className:Le.a.heading,children:"Contacts App"}),Object(se.jsx)("p",{className:Le.a.p,children:"Hello Friend!"}),Object(se.jsxs)("p",{className:Le.a.p,children:["If you have an account click here",Object(se.jsx)(u.b,{to:"/login",className:Le.a.a,children:"Login"})]}),Object(se.jsxs)("p",{className:Le.a.p,children:["If you don't have an account click here",Object(se.jsx)(u.b,{to:"/register",className:Le.a.a,children:"Register"})]})]})},Re=n(17),Se=n.n(Re),qe=function(){var e=Object(b.b)(),t={name:null,password:null,email:null},n=Object(o.useState)(t),a=Object($.a)(n,2),c=a[0],r=a[1],s=function(e){r((function(t){return Object(Q.a)(Object(Q.a)({},t),{},Object(h.a)({},e.target.name,e.target.value))}))};return Object(se.jsxs)("form",{className:Se.a.form,onSubmit:function(n){n.preventDefault();try{e(V(c)),console.log(c),r(t)}catch(a){console.log(a.message)}},children:[Object(se.jsx)("div",{className:Se.a.segment,children:Object(se.jsx)("h2",{children:"Registration"})}),Object(se.jsxs)("label",{className:Se.a.label,children:["Name",Object(se.jsx)("input",{type:"text",name:"name",required:!0,onChange:s,placeholder:"Ivanov Ivan",className:Se.a.input})]}),Object(se.jsxs)("label",{className:Se.a.label,children:["E-mail",Object(se.jsx)("input",{type:"text",name:"email",required:!0,onChange:s,placeholder:"ivanov@me.com",className:Se.a.input})]}),Object(se.jsxs)("label",{className:Se.a.label,children:["Password",Object(se.jsx)("input",{type:"text",name:"password",required:!0,onChange:s,placeholder:"Password",className:Se.a.input})]}),Object(se.jsx)("button",{type:"submit",className:Se.a.red,children:"Register"})]})},Ae=n(20),Pe=n.n(Ae),Ee=function(){var e=Object(U.g)(),t=Object(b.b)(),n={email:null,password:null},a=Object(o.useState)(n),c=Object($.a)(a,2),r=c[0],s=c[1],i=function(e){s((function(t){return Object(Q.a)(Object(Q.a)({},t),{},Object(h.a)({},e.target.name,e.target.value))}))};return Object(se.jsx)(se.Fragment,{children:Object(se.jsxs)("form",{className:Pe.a.form,onSubmit:function(a){a.preventDefault();try{t(X(r)),e.push("/contacts"),s(n)}catch(c){}},children:[Object(se.jsx)("div",{className:Pe.a.segment,children:Object(se.jsx)("h2",{children:"Sign up"})}),Object(se.jsx)("label",{className:Pe.a.label,children:Object(se.jsx)("input",{type:"text",name:"email",required:!0,onChange:i,placeholder:"Email Address",className:Pe.a.input})}),Object(se.jsx)("label",{className:Pe.a.label,children:Object(se.jsx)("input",{type:"text",name:"password",required:!0,onChange:i,placeholder:"Password",className:Pe.a.input})}),Object(se.jsx)("button",{type:"submit",className:Pe.a.red,children:"Log in"})]})})},ze=n(34),We=["children"];function Ue(e){var t=e.children,n=Object(ze.a)(e,We),a=Object(b.c)(re),c=Object(U.g)();return a&&c.push("/contacts"),Object(se.jsx)(U.b,Object(Q.a)(Object(Q.a)({},n),{},{children:a?t:Object(se.jsx)(U.a,{to:"/"})}))}var De=["children","restricted"];function He(e){var t=e.children,n=e.restricted,a=void 0!==n&&n,c=Object(ze.a)(e,De),r=Object(b.c)(re)&&a;return Object(se.jsx)(U.b,Object(Q.a)(Object(Q.a)({},c),{},{children:r?Object(se.jsx)(U.a,{to:"/contacts"}):t}))}var Te=function(){var e=Object(b.b)(),t=Object(b.c)(ae),n=Object(b.c)(oe),a=Object(b.c)(re);return Object(U.g)().push("/"),Object(o.useEffect)((function(){e(B()),e(ee())}),[e,a]),Object(se.jsx)(ve,{children:a?Object(se.jsx)(se.Fragment,{children:Object(se.jsxs)(Ue,{path:"/contacts",children:[Object(se.jsx)(Ne,{title:"Your phonebook, ".concat(n.toUpperCase())}),Object(se.jsx)(ie,{}),t.length>=2&&Object(se.jsx)(be,{}),t.length>0?Object(se.jsx)(ge,{}):Object(se.jsx)(we,{})]})}):Object(se.jsxs)(U.d,{children:[Object(se.jsx)(He,{path:"/",exact:!0,children:Object(se.jsx)(Ie,{})}),Object(se.jsx)(He,{path:"/register",restricted:!0,children:Object(se.jsx)(qe,{})}),Object(se.jsx)(He,{path:"/login",restricted:!0,children:Object(se.jsx)(Ee,{})}),Object(se.jsx)(Ue,{path:"/contacts"})]})})};i.a.render(Object(se.jsx)(b.a,{store:Y,children:Object(se.jsx)(l.a,{loading:null,persistor:K,children:Object(se.jsx)(u.a,{children:Object(se.jsx)(Te,{})})})}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.f3738b27.chunk.js.map